<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.3.xsd">
    <changeSet id="17092021-04" author="Alexander Kamyhin">
        <preConditions onFail="MARK_RAN">
            <and>
                <sqlCheck expectedResult="0">
                    SELECT count(*) FROM users;
                </sqlCheck>
            </and>
        </preConditions>
        <comment>Заполнение таблицы "Пользователи" первоначальными данными</comment>
        <sql>
            INSERT INTO users
            (username, email, telegramId, password, is_activate, created_at, created_by)
            VALUES ('admin', 'admin@mail.com', '@zHelperAdmin',
                    '$2a$10$kyorAysQRzjzn8DK.3uzCeLNBf5LTbP8.9JuAD3wzOGI2R02p6cvm', true, NOW(), 1),
                   ('user', 'user@mail.com', '@zHelperUser',
                    '$2a$10$nmtRYLpUCxBngpcDC6DB..gGgqxpaULORVEBw.tQG7AuWbTt2Euue', true, NOW(), 1);
        </sql>
    </changeSet>

    <changeSet id="17092021-05" author="Alexander Kamyhin">
        <preConditions onFail="MARK_RAN">
            <and>
                <sqlCheck expectedResult="0">
                    SELECT count(*) FROM roles;
                </sqlCheck>
            </and>
        </preConditions>
        <comment>Заполнение таблицы "Роли" первоначальными данными</comment>
        <sql>
            INSERT INTO roles
                (user_id, role)
            VALUES (1, 'ROLE_ADMIN'),
                   (1, 'ROLE_USER'),
                   (2, 'ROLE_USER');
        </sql>
    </changeSet>

    <changeSet id="17092021-06" author="Alexander Kamyhin" context="dev">
        <preConditions onFail="MARK_RAN">
            <and>
                <sqlCheck expectedResult="0">
                    SELECT count(*) FROM procurements;
                </sqlCheck>
            </and>
        </preConditions>
        <comment>Заполнение таблицы "Закупки" тестовыми данными</comment>
        <sql>
            INSERT INTO procurements
            (stage, uin, fz_number, application_deadline, contract_price, procedure_type, publisher_name, restrictions,
             link_on_placement, application_secure, contract_secure, object_of, last_updated_from_eis,
             date_time_last_updated, date_of_placement, date_of_auction)
            VALUES ('PROCUREMENT_ENDED', '202320000012100320', 615, '2021-09-08 04:00:00', '5127116.82',
                    'ELECTRONIC_AUCTION_615FZ',
                    'НЕКОММЕРЧЕСКАЯ ОРГАНИЗАЦИЯ "ФОНД КАПИТАЛЬНОГО РЕМОНТА МНОГОКВАРТИРНЫХ ДОМОВ АМУРСКОЙ ОБЛАСТИ"',
                    'Порядок расчётов осуществляется в соответствии с главой 3 Раздела «VI. Проект договора на выполнение работ по капитальному ремонту общего имущества многоквартирного дома',
                    'http://www.rts-tender.ru', 25635.58, 512711.68,
                    'Выполнение работ по капитальному ремонту общего имущества многоквартирного дома, расположенного по адресу: Амурская область, Архаринский район, пгт. Архара, ул. Октябрьская, дом 58 – капитальный ремонт внутридомовых инженерных систем.',
                    '2021-09-17 00:00:00', '2021-09-17 00:00:00', now(), now())
        </sql>
    </changeSet>
</databaseChangeLog>